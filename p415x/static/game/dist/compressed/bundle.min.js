!function t(e,r,a){function i(n,s){if(!r[n]){if(!e[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(o)return o(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports,t,e,r,a)}return r[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)i(a[n]);return i}({1:[function(t,e,r){function a(t){this.x=t.x||300,this.y=t.y||300,this.width=t.width||40,this.height=t.height||40,this.ttl=t.ttl,this.id=t.id||"random",this.opacity=t.opacity||"1",this["class"]=t["class"]||"",this.type=t.type||"output"}a.prototype.updateColor=function(t){this.color=t},a.prototype.init=function(){this.drawTarget()},a.prototype.drawTarget=function(){var t=Math.floor(19*Math.random())+1,e=this.x-this.width/2,r=this.y-this.height/2,a=d3.select("#"+this.type+"-svg").append("g");a.attr("class",this["class"]),a.style("opacity",this.opacity);var i=(a.append("rect").attr({x:e,y:r,width:this.width,height:this.height,id:this.id+"-target","class":this["class"]+"-target"}).style("opacity",0),a.append("rect").attr({x:e,y:r,width:this.width,height:this.height,id:this.id+"-sprite","class":this["class"]+"-sprite"}));i.style({fill:"url(#tar"+t+")"})},e.exports=a},{}],2:[function(t,e,r){function a(t){this.head={x:t.head.x||250,y:t.head.y||250},this.tail={x:t.tail.x||250,y:t.tail.y||250},this.color=t.color||"#92989F",this.type=t.type||"input",this.stroke=t.stroke||8}a.prototype.init=function(){this.drawVector()},a.prototype.drawVector=function(){this.type?d3.select("#"+this.type+"-svg").append("path").attr({stroke:this.color,"stroke-width":this.stroke,d:this.generatePath(),id:this.type+"-vector"}):console.log("Invalid vector type: ",this.type)},a.prototype.generatePath=function(){return"M"+this.tail.x+" "+this.tail.y+" L"+this.head.x+" "+this.head.y+" z"},e.exports=a},{}],3:[function(t,e,r){function a(t){console.log("hello canvas");var e=Math.min(document.body.offsetWidth/2.5,window.outerHeight/1.8);this.minX=t.minX||-10,this.minY=t.minY||-10,this.maxX=t.maxX||10,this.maxY=t.maxY||10,this.pixelWidth=e,this.pixelHeight=e,this.originX=e/2,this.originY=e/2,this.origin={x:this.originX,y:this.originY},this.type=t.type||"not a valid type",this.timer=t.timer||this.getTimer()}var o=t("../sauron/sauron.js"),n=new o({}),s=(t("../tutorial/tutorial.js"),t("../utilities/math.js"));a.prototype.vectorDrag=function(){return self=this,d3.behavior.drag().on("dragstart",function(){n.tellSauron(d3.mouse(this),"drag");var t=self.getTimer();t-self.timer<=200&&n.tellSauron(d3.mouse(this),"dbclick"),self.timer=t}).on("drag",function(){n.tellSauron(d3.mouse(this),"drag")})},a.prototype.getCanvas=function(t){var e=t||this.type;return d3.select("#"+e+"-canvas")},a.prototype.getSvg=function(t){var e=t||this.type;return d3.select("#"+e+"-svg")},a.prototype.getDefs=function(t){var e=t||this.type;return d3.select("#"+e+"-defs")},a.prototype.getTar=function(t){return d3.select("#tar"+t)},a.prototype.appendSvg=function(t){var e=t||this.type;this.getCanvas(e).append("svg").attr({id:e+"-svg",width:this.pixelWidth,height:this.pixelHeight})},a.prototype.appendImageToPattern=function(){if("output"===this.type){for(i=1;i<20;i++){var t=this.getTar(i);t.append("image").attr({x:"0",y:"0",width:"40",height:"40","xlink:href":"/static/game/public/img/items/glow/target"+i+".gif"})}var e=this.getTar("arm");for(e.append("image").attr({x:"0",y:"0",width:"30px",height:"100px","xlink:href":"/static/game/public/img/robotarm.gif"}),i=2;i<=4;i++){var r=this.getTar("roboglitch"+i);r.append("image").attr({x:"0",y:"0",width:"92px",height:"109px","xlink:href":"/static/game/public/img/robo/roboglitch"+i+".gif"})}for(i=1;i<5;i++){var r=this.getTar("robo"+i);r.append("image").attr({x:"0",y:"0",width:"69px",height:"94px","xlink:href":"/static/game/public/img/robo/robo"+i+".gif"})}}if("input"===this.type){var a=this.getTar("blip");a.append("image").attr({x:"0",y:"0",width:"40",height:"40","xlink:href":"/static/game/public/img/blip.gif"})}},a.prototype.appendPatternToDefs=function(){var t=this.getDefs();if("output"===this.type){for(i=1;i<20;i++)t.append("pattern").attr({id:"tar"+i,x:"0",y:"0",height:"40",width:"40"});for(t.append("pattern").attr({id:"tararm",x:"0",y:"0",height:"100px",width:"30px"}),i=2;i<=4;i++)t.append("pattern").attr({id:"tarroboglitch"+i,x:"0",y:"0",height:"1",width:"1"});for(i=1;i<5;i++)t.append("pattern").attr({id:"tarrobo"+i,x:"0",y:"0",height:"1",width:"1"})}"input"===this.type&&t.append("pattern").attr({id:"tarblip",x:"0",y:"0",height:"40",width:"40"})},a.prototype.appendDefsToSvg=function(){var t=this.getSvg();t.append("defs").attr("id",this.type+"-defs")},a.prototype.drawCanvas=function(){return this.type?(this.appendSvg(),void("input"===this.type?(this.getCanvas().call(this.vectorDrag()),this.drawTargetsOnCanvas()):"output"===this.type&&this.drawTargetsOnCanvas())):void console.log("Invalid Canvas Type")},a.prototype.drawTargetsOnCanvas=function(){this.appendDefsToSvg(),this.appendPatternToDefs(),this.appendImageToPattern()},a.prototype.drawProgressBar=function(){var t=d3.select("#progress-container");t.append("div").attr({"class":"progress-bar progress-bar-success progress-bar-striped active",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",id:"progressbar"}),t.append("span").attr({id:"score","class":"sr-only"})},a.prototype.proximity=function(t,e){s.isClose(targetX,targetY,500)?e.updateColor("#e5e5ff",e.id):s.isClose(targetX,targetY,450)?e.updateColor("#ccccff",e.id):s.isClose(targetX,targetY,400)?e.updateColor("#b2b2ff",e.id):s.isClose(targetX,targetY,350)?e.updateColor("#9999ff",e.id):s.isClose(targetX,targetY,300)?e.updateColor("#7f7fff",e.id):s.isClose(targetX,targetY,250)?e.updateColor("#6666ff",e.id):s.isClose(targetX,targetY,200)?e.updateColor("#4c4cff",e.id):s.isClose(targetX,targetY,150)?e.updateColor("#3232ff",e.id):s.isClose(targetX,targetY,100)?e.updateColor("#1919ff",e.id):s.isClose(targetX,targetY,50)&&e.updateColor("#0000ff",e.id)},a.prototype.drawTarget=function(t){d3.select("#"+this.type+"-canvas").append("circle").attr({cx:t.x,cy:t.y,r:t.r,color:t.color})},a.prototype.getTimer=function(){var t=new Date;return t.getTime()},e.exports=a},{"../sauron/sauron.js":13,"../tutorial/tutorial.js":15,"../utilities/math.js":17}],4:[function(t,e,r){e.exports={inputCanvasSettings:{type:"input",minX:-10,minY:-10,maxX:10,maxY:10},outputCanvasSettings:{type:"output",minX:-10,minY:-10,maxX:10,maxY:10},inputVectorSettings:{type:"input",tail:{x:null,y:null},head:{x:null,y:null}},outputVectorSettings:{type:"output",tail:{x:null,y:null},head:{x:null,y:null},stroke:9},targetSettings:{x:355,y:50,r:20},sauron:{matrix:[[1,2],[2,1]],level:1,type:"random"}}},{}],5:[function(t,e,r){function a(){$(window).ready(function(){c.init()})}function i(){var t=new o(u.inputCanvasSettings),e=new n(u.inputVectorSettings),r=new n(u.outputVectorSettings),a=new o(u.outputCanvasSettings);t.drawCanvas(),a.drawCanvas(),a.drawProgressBar(),p.drawRobot(1),e.init(),r.init(),h.generateRandomLineofDeath(!0)}var o=t("../canvas/canvas.js"),n=t("../actors/vector.js"),s=(t("../actors/target.js"),t("../sauron/sauron.js")),l=t("../smaug/smaug.js"),c=t("../tutorial/tutorial.js"),u=t("./config.js"),p=new l,h=new s(u.sauron);startLevel1=function(){i(),a()},startTut=function(){setTimeout(function(){c.tutorialControl(5e3)},0)}},{"../actors/target.js":1,"../actors/vector.js":2,"../canvas/canvas.js":3,"../sauron/sauron.js":13,"../smaug/smaug.js":14,"../tutorial/tutorial.js":15,"./config.js":4}],6:[function(t,e,r){setTimeout(function(){$(".infoLeft").fadeIn()},5e3)},{}],7:[function(t,e,r){e.exports={inputCanvasSettings:{type:"input",minX:-10,minY:-10,maxX:10,maxY:10},outputCanvasSettings:{type:"output",minX:-10,minY:-10,maxX:10,maxY:10},inputVectorSettings:{type:"input",tail:{x:null,y:null},head:{x:null,y:null},stroke:9},outputVectorSettings:{type:"output",tail:{x:null,y:null},head:{x:null,y:null}},sauron:{matrix:[[1,2],[2,1]],level:2,type:"line"}}},{}],8:[function(t,e,r){function a(){var t=new i(l.inputCanvasSettings),e=new o(l.inputVectorSettings),r=new o(l.outputVectorSettings),a=new i(l.outputCanvasSettings);t.drawCanvas(),a.drawCanvas(),a.drawProgressBar(),e.init(),r.init(),c.drawRobot(2),u.generateRandomCircleofDeath(!0)}var i=t("../canvas/canvas.js"),o=t("../actors/vector.js"),n=(t("../actors/target.js"),t("../sauron/sauron.js")),s=t("../smaug/smaug.js"),l=t("./config.js"),c=new s,u=new n(l.sauron);startLevel2=function(){a()}},{"../actors/target.js":1,"../actors/vector.js":2,"../canvas/canvas.js":3,"../sauron/sauron.js":13,"../smaug/smaug.js":14,"./config.js":7}],9:[function(t,e,r){e.exports={inputCanvasSettings:{type:"input",minX:-10,minY:-10,maxX:10,maxY:10},outputCanvasSettings:{type:"output",minX:-10,minY:-10,maxX:10,maxY:10},inputVectorSettings:{type:"input",tail:{x:null,y:null},head:{x:null,y:null},stroke:9},outputVectorSettings:{type:"output",tail:{x:null,y:null},head:{x:null,y:null}},sauron:{matrix:[[1,2],[2,1]],level:3,type:"circle"}}},{}],10:[function(t,e,r){function a(){var t=new i(l.inputCanvasSettings),e=new o(l.inputVectorSettings),r=new o(l.outputVectorSettings),a=new i(l.outputCanvasSettings);t.drawCanvas(),a.drawCanvas(),a.drawProgressBar(),e.init(),r.init(),c.drawRobot(3),u.generateTarget(!0)}var i=t("../canvas/canvas.js"),o=t("../actors/vector.js"),n=(t("../actors/target.js"),t("../sauron/sauron.js")),s=t("../smaug/smaug.js"),l=t("./config.js"),c=new s,u=new n(l.sauron);startLevel3=function(){a()}},{"../actors/target.js":1,"../actors/vector.js":2,"../canvas/canvas.js":3,"../sauron/sauron.js":13,"../smaug/smaug.js":14,"./config.js":9}],11:[function(t,e,r){function a(){state=0}function i(t){var e=new showdown.Converter,r=new XMLHttpRequest;r.open("GET",t,!1),r.onreadystatechange=function(){if(4===r.readyState&&(200===r.status||0==r.status)){var t=r.responseText;$("#chatbar").append("<div class='messages_sent'>"+e.makeHtml(t)+"</div>")}},r.send(null)}a.prototype.sendmsg=function(t){t.preventDefault(),showdown.setFlavor("github");var e=document.getElementById("btn-input"),r=e.value;if(e.value="","help"===r){0==state?($("#chatbar").append("<div class='messages_sent'><p>Click the radar screen to activate the robot arm!</p></div>"),state++):1==state?($("#chatbar").append("<div class='messages_sent'><p>Click and drag the arm in the radar screen to move the robot's arm!</p></div>"),state++):2==state?($("#chatbar").append("<div class='messages_sent'><p>Help the robot reach the parts. Move the arm on the input screen so that his arm can pick up the pieces.</p></div>"),state++):3==state?($("#chatbar").append("<div class='messages_sent'><p>Double click the radar screen to collect the part.</p></div>"),state++):4==state&&(console.log("lol"),i("/guide/"+level),state++);var a=document.getElementById("chat-panel");a.scrollTop=a.scrollHeight}else"clear"===r&&(document.getElementById("chatbar").innerHTML="",state=0)},a.prototype.addText=function(t){$("#chatbar").append("<div class='messages_sent'><p>"+t+"</p></div>"),state++},e.exports=a},{}],12:[function(t,e,r){setTimeout(function(){$(".infoLeft").fadeIn()},5e3)},{}],13:[function(t,e,r){function a(t){this.armies=[],this.level=t==={}?-1:t.level,this.matrix=[[1,2],[2,1]],this.deathToll=0,this.graphics=new s,this.chat=new l,this.chat_form=document.getElementById("chat_form"),this.enable=!0,this.messenger=document.getElementById("mailbox"),this.btnsOn=0;var e=this;setInterval(function(){console.log("this.btnsOn "+e.btnsOn)},2e3),this.messenger.addEventListener("levelup",function(){e.btnsOn?console.log("failed!"):(console.log("recieved a message!+ "+e.btnsOn),e.btnsOn=1,setTimeout(function(){e.btnsOn=0,console.log("self.btns set!")},1e3),level_changed=0,level+=.25,e.generateNewTargets("",!0))},!1),this.messenger.addEventListener("leveldown",function(){e.btnsOn?console.log("failed!"):(e.btnsOn=1,setTimeout(function(){e.btnsOn=0,console.log("self.btns set!")},1e3),console.log("recieved a message!-"),level_changed=0,level-=.25,level<1&&(level=1),e.generateNewTargets("",!0))},!1),this.chat_form.onsubmit=function(t){e.chat.sendmsg(t)}}var i=t("../utilities/math.js"),o=t("../actors/target.js"),n=t("../tutorial/tutorial.js"),s=t("../smaug/smaug.js"),l=t("../gollum/gollum.js");a.prototype.setMatrix=function(){var t=i.getRandom(.75,1.5),e=i.getRandom(2,3),r=[[t,0],[0,e]],a=i.getRandom(Math.PI/2,3*Math.PI/2),o=[[Math.cos(a),-Math.sin(a)],[Math.sin(a),Math.cos(a)]];this.matrix=[[o[0][0]*r[0][0]+o[0][1]*r[1][0],o[0][0]*r[0][1]+o[0][1]*r[1][1]],[o[1][0]*r[0][0]+o[1][1]*r[1][0],o[1][0]*r[0][1]+o[1][1]*r[1][1]]]},a.prototype.applyTransformation=function(t,e,r){var r=this.matrix,a=document.getElementById("input-svg").width.baseVal.value,o=i.screenToMath(t,e,a),n=[r[0][0]*o[0]+r[0][1]*o[1],r[1][0]*o[0]+r[1][1]*o[1]];return i.mathToScreen(n[0],n[1],a)},a.prototype.updateInputVector=function(t){this.removeVector("input");var e=document.getElementById("input-svg").width.baseVal.value;d3.select("#input-svg").append("path").attr({stroke:"#31BA29","stroke-width":"8",d:"M "+e/2+" "+e/2+" L"+t.x+" "+t.y+"z",id:"input-vector"})},a.prototype.removeVector=function(t){d3.select("#"+t+"-vector").remove()},a.prototype.updateOutputVector=function(t){var e=document.getElementById("input-svg").width.baseVal.value,r=i.applyMatrix(t.x,t.y,this.matrix,e);this.removeVector("output");var a=Math.sqrt((e/2-r[0])*(e/2-r[0])+(e/2-r[1])*(e/2-r[1])),o=-1*Math.atan((r[0]-e/2)/(r[1]-e/2))*180/Math.PI;r[1]>e/2&&(o+=180);var n=20,s="none";if(300>a&&(s="xMinYMin slice"),0===d3.select("#output-vector").size()){d3.select("#output-svg").append("image").attr({x:r[0]-n/2,y:r[1],width:""+n+"px",height:""+a+"px",preserveAspectRatio:s,id:"output-vector","xlink:href":"/static/game/public/img/robotarm.gif",transform:"rotate("+o+","+r[0]+","+r[1]+")"})}else d3.select("#output-vector").attr({x:r[0]-n/2,y:r[1],width:""+n+"px",height:"100px",preserveAspectRatio:s,transform:"rotate("+o+","+r[0]+","+r[1]+")"})},a.prototype.getArmies=function(){return d3.select("#output-svg").selectAll(".new-target")},a.prototype.updateTargets=function(t,e){var r=this.getArmies(),a=document.getElementById("input-svg").width.baseVal.value,o=i.applyMatrix(t.x,t.y,this.matrix,a),n=this;r.each(function(){var t=d3.select(this),r=t.attr("id"),a=Number(t.attr("width")),s=Number(t.attr("height")),l=Number(t.attr("x"))+a/2,c=Number(t.attr("y"))+s/2;i.isClose(o[0],o[1],l,c,a/2,s/2)?(t.sprite().style("opacity")>.9&&t.sprite().jump(10,250),"collision"===e&&(t.sprite().transition(),d3.select(t.node().parentNode).attr("class","clicked"),t.setClicked(),t.sprite().transition().attr("y",t.attr("y")).style("opacity",.4).duration(250),n.deathToll++,n.drawBlips(l,c),0===n.getArmies().size()&&n.generateNewTargets(r))):t.sprite().transition().style("opacity",1).attr("y",t.attr("y"))})},a.prototype.checkNumberOfBlips=function(){return d3.selectAll(".blips").size()},a.prototype.removeBlips=function(t){var e=this;this.deathToll=0,d3.selectAll(".clicked-target").remove(),d3.selectAll(".clicked-sprite").transition().style("opacity",1).duration(100),d3.selectAll(".clicked, .blips").slowDeath(2e3),this.enable=!1,setTimeout(function(){e.graphics.changeRobot(0,!0,2e3,t)},2001),setTimeout(function(){d3.selectAll(".clicked").remove(),d3.selectAll(".new").isBorn(500),e.enable=!0},4001)},a.prototype.generateNewTargets=function(t,e){var r=this;if(e?(d3.selectAll(".new").remove(),this.removeBlips(3)):3!=level&&(level_changed++,level_changed%=3,level_changed||(r.chat.addText("df"),level++)),console.log("genhere"),3==level){var a=!1;this.checkNumberOfBlips()>=5&&(this.setMatrix(),this.removeBlips(3),a=!0),this.generateTarget(!a)}else 1==level?(this.setMatrix(),this.generateRandomLineofDeath(),this.removeBlips(1)):2==level&&(this.setMatrix(),this.generateRandomCircleofDeath(),this.removeBlips(2))},a.prototype.tellSauron=function(t,e){var r=this.convertMouseToCoord(t);return this.enable?void("drag"===e?(this.updateInputVector(r),this.updateOutputVector(r),n.show&&n.reopen||this.updateTargets(r,"detection")):"dbclick"===e&&this.updateTargets(r,"collision")):(this.updateInputVector(r),void this.updateOutputVector(r))},a.prototype.convertMouseToCoord=function(t){return{x:t[0],y:t[1]}},a.prototype.updateProgress=function(){var t=d3.select("#progressbar"),e=d3.select("#score");currScore=t.attr("aria-valuenow"),Number(currScore)>=100?(currScore=100,e.text("Proceed To Next Level!")):(this.level<=1?currScore=Number(currScore)+5:currScore=Number(currScore)+100/24,e.text(currScore+"% Complete")),t.style("width",currScore+"%"),t.attr("aria-valuenow",currScore)},a.prototype.generateTarget=function(t){var e=t?1:0,r=!1,a=this.matrix;for(a[0][0]*a[1][1]-a[0][1]*a[1][0];!r;){var o={x:i.getRandom(10,document.getElementById("input-svg").width.baseVal.value-10),y:i.getRandom(10,document.getElementById("input-svg").width.baseVal.value-10)},n=document.getElementById("input-svg").width.baseVal.value;if(i.isOnRadar(o.x,o.y,a,n)){r=!0;var s={x:o.x,y:o.y,width:40,height:40,color:"black",id:"random_"+this.deathToll,"class":"new",opacity:""+e};this.drawTarget(s)}}},a.prototype.drawBlips=function(t,e){console.log("drawing blips");var r=document.getElementById("input-svg").width.baseVal.value,a=i.applyInverse(t,e,this.matrix,r);d3.select("#input-svg").append("circle").attr({cx:a.x,cy:a.y,r:20}).attr("class","blips").style({fill:"url(#tarblip)"}),console.log("done drawing blips")},a.prototype.generateRandomCircleofDeath=function(t){var e=t?1:0,r=i.getValidPreImageOval(this.matrix),a=0;for(var o in r){var n=document.getElementById("input-svg").width.baseVal.value,s=r[o],l=i.mathToScreen(s.x,s.y,n),c={x:l[0],y:l[1],width:40,height:40,color:"black",id:"circle_"+a,"class":"new",opacity:""+e};this.drawTarget(c),a++}},a.prototype.generateRandomLineofDeath=function(t){var e=t?1:0,r=i.getValidPreImagePairs(),a=0;for(var o in r){var n=document.getElementById("input-svg").width.baseVal.value,s=r[o],l=i.mathToScreen(s.x,s.y,n),c={x:l[0],y:l[1],width:40,height:40,color:"black",id:"line_"+a,"class":"new",opacity:""+e};this.drawTarget(c),a++}},a.prototype.drawTarget=function(t){var e=new o(t);e.drawTarget()},e.exports=a},{"../actors/target.js":1,"../gollum/gollum.js":11,"../smaug/smaug.js":14,"../tutorial/tutorial.js":15,"../utilities/math.js":17}],14:[function(t,e,r){function a(){this.robot=null}a.prototype.changeRobot=function(t,e,r,a){a++,this.checkRobot(),e?(this.robot.transition().style("opacity",function(){return this.id=="robotglitch"+a?1:0}).transition().duration(r).transition().style("opacity",function(){return this.id=="robot"+a?1:0}).duration(0),setTimeout(function(){d3.select("#robot").style({fill:"url(#tarrobo"+a+")"})},r)):d3.select("#robot").style({fill:"url(#tarrobo"+a+")"})},a.prototype.moveRobot=function(t,e,r,a){this.checkRobot(),a=a||function(t,e,r){r.attr({x:t,y:e})};var i=null;targetY=null,r?(i=t,targetY=e):(i=t+Number(this.robot.attr("x")),targetY=e+Number(this.robot.attr("y"))),a(i,targetY,this.robot)},a.prototype.checkRobot=function(){return 0!=d3.selectAll(".robot").size()?(this.robot=d3.selectAll(".robot"),void console.log("robot exists!")):void 0},a.prototype.drawRobot=function(t){t=t||1,t++;for(var e=Number(d3.select("#output-svg").attr("width")),r=Number(d3.select("#output-svg").attr("height")),a=2;4>=a;a++)d3.select("#output-svg").append("rect").attr({x:e/2-80,y:r/2-54.5-4,width:"92px",height:"109px",id:"robotglitch"+a,"class":"robot"}).style({fill:"url(#tarroboglitch"+a+")",opacity:0});for(var a=1;5>a;a++)d3.select("#output-svg").append("rect").attr({x:e/2-69,y:r/2-47,width:"69px",height:"94px",id:"robot"+a,"class":"robot"}).style({fill:"url(#tarrobo"+a+")",opacity:0});d3.select("#robot"+t).style("opacity",1),console.log("Drew the robot!")},a.prototype.changeBackground=function(t){},e.exports=a},{}],15:[function(t,e,r){function a(t){this.num=1,this.show=!1,this.reopen=!1,this.timer=null}a.prototype.init=function(){$("#tutorial").popover()},a.prototype.tutorialControl=function(t){var e=this;if(console.log("called tutorialControl "+e.num),!this.show||!this.reopen){if(1===e.num)e.num++,d3.select("#tutorial").attr("data-content","Click the radar screen to activate the robot arm!");else if(2===e.num)e.num++,d3.select("#tutorial").attr("data-content","Click and drag the arm in the radar screen to move the robot's arm!");else if(3===e.num)e.num++,d3.select("#tutorial").attr("data-content","Help the robot reach the parts. Move the arm on the input screen so that his arm can pick up the pieces.");else{if(4!==e.num)return e.show=!1,void $("#tutorial").popover("hide");e.num++,d3.select("#tutorial").attr("data-content","Double click the radar screen to collect the part")}$("#tutorial").popover("show"),e.show=!0,e.reopen=!1,console.log("asdf"),setTimeout(function(){console.log("timer done "+e.num),e.tutorialControl(t,!1)},t)}},a.prototype.clearTimer=function(){clearTimeout(this.timer)},a.prototype.setTimer=function(t){this.timer=setTimeout(function(){$("#tutorial").popover("hide")},t)},e.exports=new a},{}],16:[function(t,e,r){var a=t("../utilities/math.js");d3.selection.prototype.spinAndBlink=function(t){var e=this;return e.style("opacity",.9),function r(){function i(){var t=d3.select(this),e=t.attr("width"),r=t.attr("height"),a=Number(t.attr("x"))+e/2,i=Number(t.attr("y"))+r/2,o=d3.interpolate(0,360);return function(t){return"rotate("+o(t)+","+a+","+i+")"}}function o(){var e=d3.select(this),r=e.attr("width"),i=e.attr("height"),o=Number(e.attr("x"))+r/2,n=Number(e.attr("y"))+i/2,s=a.applyMatrix(t.pos.x,t.pos.y,t.matrix),l=2e3;return a.isInRange(s[0],s[1],o,n,r/2,i/2,2)&&(l/=2),a.isClose(s[0],s[1],o,n,r/2,i/2)&&(l/=2),l}"clicked"!==e.attr("class")&&"dead"!==e.attr("class")&&(e=e.transition().attrTween("transform",i).duration(o).transition().style("opacity",.5).duration(250).transition().style("opacity",.9).duration(250).each("end",r))}(),this},d3.selection.prototype.blink=function(t,e,r){var i=this;return i.style("opacity",.9),function o(){function n(){var e=d3.select(this),i=e.attr("width"),o=e.attr("height"),n=Number(e.attr("x"))+i/2,s=Number(e.attr("y"))+o/2,l=a.applyMatrix(t.pos.x,t.pos.y,t.matrix),c=r;return a.isInRange(l[0],l[1],n,s,i/2,o/2,2)&&(c/=2),a.isClose(l[0],l[1],n,s,i/2,o/2)&&(c/=2),c}"clicked"!==i.attr("class")&&"dead"!==i.attr("class")&&(i=i.transition().style("opacity",.5).duration(e?n:r).transition().style("opacity",.9).duration(e?n:r).each("end",o))}(),this},d3.selection.prototype.jump=function(t,e){var r=this;r.style("opacity",.9);var a=r.attr("y");return function i(){var o=r.node().className.baseVal;"clicked-sprite"!==o&&"dead"!==o&&(r=r.transition().attr("y",Number(a)+t).duration(e).transition().attr("y",Number(a)-t).duration(e).each("end",i))}(),this},d3.selection.prototype.randomlines=function(t){var e=this;!function r(){var i=a.getRandom(0,460),o=a.getRandom(0,460);e=e.transition().attr("x",i).attr("y",o).ease("linear").duration(function(){var e=Number(d3.select(this).attr("x")),r=Number(d3.select(this).attr("y")),a=(Number(e)-i)*(Number(e)-i),n=(Number(r)-o)*(Number(r)-o),s=Math.sqrt(a+n)*t;return s}).each("end",r)}()},d3.selection.prototype.slowDeath=function(t){return this.attr("class","dead").transition().style("opacity",0).duration(t),setTimeout(function(){d3.selectAll(".dead").remove()},t+100),this},d3.selection.prototype.isBorn=function(t){return this.transition().style("opacity",1).duration(t),setTimeout(function(){d3.select(this).style("opacity",1)},t+100),this},d3.selection.prototype.wait=function(t){return this.transition().duration(t),this},d3.transition.prototype.setRotation=function(t){return this.attrTween("transform",function(){var e=d3.select(this),r=e.attr("width"),a=e.attr("height"),i=Number(e.attr("x"))+r/2,o=Number(e.attr("y"))+a/2;return function(){return"rotate("+t+","+i+","+o+")"}}),this},d3.selection.prototype.setClicked=function(){var t=this,e=t.attr("id"),r=e.split("-")[0],a=d3.select("#"+r+"-sprite");a.attr("class","clicked-sprite"),t.attr("class","clicked-target")},d3.selection.prototype.sprite=function(){var t=this,e=t.attr("id"),r=e.split("-")[0],a=d3.select("#"+r+"-sprite");return a},d3.selection.prototype.animateSprite=function(){var t=this;return t.sprite().transition()}},{"../utilities/math.js":17}],17:[function(t,e,r){e.exports={screenToMath:function(t,e,r){return[10*(t-r/2)/(r/2),10*-(e-r/2)/(r/2)]},mathToScreen:function(t,e,r){return[t*(r/2)/10+r/2,-e*(r/2)/10+r/2]},applyInverse:function(t,e,r,a){var i=r[0][0]*r[1][1]-r[0][1]*r[1][0],o=this.screenToMath(t,e,a),n=(r[1][1]*o[0]-r[0][1]*o[1])/i,s=(-r[1][0]*o[0]+r[0][0]*o[1])/i,o=this.mathToScreen(n,s,a);return{x:o[0],y:o[1]}},applyMatrix:function(t,e,r,a){var i=this.screenToMath(t,e,a),o=[r[0][0]*i[0]+r[0][1]*i[1],r[1][0]*i[0]+r[1][1]*i[1]];return this.mathToScreen(o[0],o[1],a)},getRandom:function(t,e){return Math.random()*(e-t)+t},isClose:function(t,e,r,a,i,o){return Math.abs(r-t)<=i&&Math.abs(a-e)<=o},isOnScreen:function(t,e,r){var a=this.screenToMath(e.x,e.y,r),i=t[0][0]*t[1][1]-t[0][1]*t[1][0],o=(t[1][1]*a[0]-t[0][1]*a[1])/i,n=(-t[1][0]*a[0]+t[0][0]*a[1])/i;return a=this.mathToScreen(o,n,r),a[0]>=0&&a[0]<=r&&a[1]>=0&&a[1]<=r},getValidPreImageCircle:function(){for(var t=[],e=Math.random()*Math.PI,r=4*Math.random()+4,a=0;8>a;a++)t.push({x:r*Math.cos(e),y:r*Math.sin(e)}),e+=Math.PI/4;return t},getValidPreImageOval:function(t){for(var e=[],r=Math.random()*Math.PI,a=3*Math.random()+1,i=0;8>i;i++)e.push({x:t[0][0]*a*Math.cos(r)+t[0][1]*a*Math.sin(r),y:t[1][0]*a*Math.cos(r)+t[1][1]*a*Math.sin(r)}),r+=Math.PI/4;return e},getValidPreImagePairs:function(){for(var t=[],e=[1.5,4.5,7.5],r=Math.PI*Math.random(),a=Math.cos(r),i=Math.sin(r),o=0;o<e.length;o++)t.push({x:e[o]*a,y:e[o]*i}),t.push({x:-1*e[o]*a,y:-1*e[o]*i});return t},isOnRadar:function(t,e,r,a){var i=this.applyInverse(t,e,r,a);return i.x>0&&i.x<a&&i.y>0&&i.y<a}}},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]);